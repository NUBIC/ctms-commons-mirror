<project name="AdverseEventConsumerService" basedir=".">
    <property name="antfile.dir" value="${basedir}/../../antfiles" />
    <property file="${antfile.dir}/build.properties" />
    <property file="${basedir}/service.properties" />
    <import file="${antfile.dir}/common.xml"/>

    <target name="publish-local" depends="clean,resolve, external-build, publish-local-external-jar" description="-->Will build and deploy the AdverseEventConsumer">

    </target>
    <target name="publish" depends="clean,resolve,external-build,publish-external-jar" description="--> Will build and deploy the AdverseEventConsumer">

    </target>

    <target name="external-build" description="Will build the grid service using introduce generated build file">
        <!-- I am not sure, whether deployTomcat is the right target -->
        <ant antfile="${basedir}/build.xml" target="all" inheritall="false" inheritrefs="true" dir="${basedir}"/>
    </target>

    <target name="publish-local-external-jar" depends="local-version" description="Will publish the jars generated by the external introduce build">
        <ivyPublish artifactspattern="${basedir}/build/lib/[artifact].[ext]"
                    resolver="ccts-local"
                    pubrevision="${project.version}-local-${now}"
                    status="integration"
                />
    </target>

    <target name="publish-external-jar" depends="version" description="Will publish the jar generated by the external introduce to a public repository">
        <ivyPublish artifactspattern="${basedir}/build/lib/[artifact].[ext]"
                    resolver="semanticbits-grid-repo-sftp"
                    pubrevision="${project.version}"
                    status="release"
                />
        <echo message="project ${ant.project.name} released with version ${version}" />
    </target>

    <target name="resolve" depends="load-ivy" description="Will resolve the dependencies">
        <!-- resolve the dependencies -->
        <ivyResolve confs="build" libdir="${basedir}/lib" resolveid="[org]-[module]"/>
    </target>

    <target name="clean" description="Will clean using the existing build:clean task">
        <!-- Clean-->
        <ant antfile="${basedir}/build.xml" target="clean" />
    </target>

</project>